import { MigrationInterface, QueryRunner } from "typeorm";

export class AddPayableReceivableToPayments1765581004941 implements MigrationInterface {
    name = 'AddPayableReceivableToPayments1765581004941'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "user_assigned_roles_role_id_fkey"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "user_assigned_roles_user_id_fkey"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "user_assigned_roles_assigned_by_fkey"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP CONSTRAINT "FK_804560ec0e32381a87370cafc56"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP CONSTRAINT "fk_partner_payouts_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP CONSTRAINT "fk_profit_distributions_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP CONSTRAINT "FK_ef0eed7f5e819f5ac6bfe11dac4"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "FK_84668cdcd6abdb2bf27dab815c8"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "fk_partner_mining_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "fk_partner_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "fk_partner_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "fk_partner_lease"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP CONSTRAINT "fk_income_client"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP CONSTRAINT "fk_income_liability"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP CONSTRAINT "FK_95712ab51d460bd91b7dba1b55b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP CONSTRAINT "fk_income_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "fk_clients_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "FK_87a40c9c38aa917baff4aca82de"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "FK_f48a5f46db8d13a0c8dad0a435d"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "fk_client_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "fk_client_type"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "fk_expense_client"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_7c0c012c2f8e6578277c239ee61"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "fk_expense_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_51fb74b0eb9a50850da92d0533c"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "fk_expense_worker"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "fk_expense_type"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_22eb9437b91298ce0161b05ce94"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP CONSTRAINT "FK_b81d7b8569bcc8f71e4b3efefa2"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP CONSTRAINT "FK_dbe85a9e696f4a310a30501b063"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "fk_labor_cost_workers_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "FK_236b4a4823e804dd97f3cf801e7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP CONSTRAINT "fk_worker_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP CONSTRAINT "fk_worker_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP CONSTRAINT "fk_workers_supervisor"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "FK_dbf9ba601e43dd884585e53d0ce"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP CONSTRAINT "fk_mining_site_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP CONSTRAINT "fk_mining_site_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP CONSTRAINT "fk_mining_site_lease"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" DROP CONSTRAINT "FK_8790d3264c2a836541ca100c78f"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" DROP CONSTRAINT "fk_equipment_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" DROP CONSTRAINT "fk_equipment_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" DROP CONSTRAINT "fk_expense_type_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" DROP CONSTRAINT "fk_expense_type_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" DROP CONSTRAINT "fk_client_type_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" DROP CONSTRAINT "fk_client_type_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" DROP CONSTRAINT "fk_account_type_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" DROP CONSTRAINT "fk_account_type_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" DROP CONSTRAINT "fk_ledger_mining_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" DROP CONSTRAINT "fk_ledger_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" DROP CONSTRAINT "fk_ledger_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" DROP CONSTRAINT "fk_ledger_account_type"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" DROP CONSTRAINT "fk_liability_client"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" DROP CONSTRAINT "fk_liability_mining_site"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" DROP CONSTRAINT "fk_liability_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" DROP CONSTRAINT "fk_liability_modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" DROP CONSTRAINT "fk_lease_created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" DROP CONSTRAINT "fk_lease_modified_by"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_user_assigned_roles_user_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_user_assigned_roles_role_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_user_assigned_roles_status"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_payouts_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_payout_distribution"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_payout_partner"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_profit_distributions_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_cnic"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_lease"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_mining_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_client"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_liability"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_clients_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_client_type"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_client_business_name"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_type"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_worker"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_client"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_category"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cost_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cost_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cost_workers_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cnic"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_workers_supervisor_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_mining_site_lease"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_ledger_account_type"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_liability_status"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_lease_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "user_assigned_roles_user_id_role_id_key"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "UQ_5aba3b98daab87c536e9c7d58dc"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "UQ_fa5b6365e8d996ec487500cf818"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" RENAME COLUMN "is_active" TO "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" RENAME COLUMN "updated_at" TO "is_active"`);
        await queryRunner.query(`CREATE TABLE "coal_mining"."truck_deliveries" ("id" SERIAL NOT NULL, "date" date NOT NULL, "truck_number" character varying(100), "quantity" numeric(10,2), "site_id" integer, "client_id" integer, "notes" text, "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "PK_cbaee884e9942c5792e85f5648d" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "coal_mining"."production" ("id" SERIAL NOT NULL, "date" date NOT NULL, "site_id" integer NOT NULL, "quantity" numeric(15,2) NOT NULL, "quality" character varying(50), "shift" character varying(50), "notes" text, "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "PK_722753196a878fa7473f0381da3" PRIMARY KEY ("id"))`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "permissions"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP CONSTRAINT "user_roles_name_key"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "assigned_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "updated_comment"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "distribution_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "share_percentage"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "payout_amount"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "period_start"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "period_end"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "total_revenue"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "total_expenses"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "total_profit"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "approved_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "approved_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "status"`);
        await queryRunner.query(`DROP TYPE "coal_mining"."profit_distributions_status_enum"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "share_percentage"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "mine_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "lease_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "mining_site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "lease"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "UQ_7316fee3f67b04fe07e14908ee3"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "cnic"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "address"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "email"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "loading_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "coal_price"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "company_commission"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "quantity_tons"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "total_price"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "status"`);
        await queryRunner.query(`DROP TYPE "coal_mining"."income_status_enum"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "amount_from_liability"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "liability_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "amount_cash"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "truck_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "driver_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "driver_phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "buyer_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "vehicle_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "evidence_photos"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "coal_agent_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "onboarding_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "client_type_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "business_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "owner_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "owner_contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "munshi_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "munshi_contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "document_files"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "expense_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "labor_cost_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "account_type"`);
        await queryRunner.query(`DROP TYPE "coal_mining"."expenses_account_type_enum"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "payee_type"`);
        await queryRunner.query(`DROP TYPE "coal_mining"."expenses_payee_type_enum"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "labor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "partner_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "payment_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "expense_type_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "worker_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "evidence_photos"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "payment_proof"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "proof"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "work_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "quantity_tons"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "rate_per_ton"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "evidence_photos"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "labor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "start_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "end_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "daily_wage"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "onboarding_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "offboarding_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "status"`);
        await queryRunner.query(`DROP TYPE "coal_mining"."workers_status_enum"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "supervisor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "cnic"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "father_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "address"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "mobile_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "emergency_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "other_detail"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "supervisor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "assigned_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "lease_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "role_name" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD CONSTRAINT "UQ_85683c502a3882013c989f4ee35" UNIQUE ("role_name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ADD "status" character varying(50) DEFAULT 'active'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "amount" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "partner_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "amount" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "contact" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "profit_share" numeric(5,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "amount" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "source" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "email" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "phone" character varying(50)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "type" character varying(100)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "worker_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "hours" numeric(10,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "cost" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "created_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "role" character varying(100)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "contact" character varying(50)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "hourly_rate" numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "contact" character varying(100)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "created_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "status" character varying(50) DEFAULT 'active'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "partner_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "truck_number" character varying(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "loading_date" TIMESTAMP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "driver_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "driver_phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "coal_price" numeric(12,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "company_commission" numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "buyer_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "vehicle_number" character varying(50)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "quantity_tons" numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "total_price" numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "status" "coal_mining"."income_status_enum" NOT NULL DEFAULT '() => "'draft'.income_status_enum"'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "evidence_photos" text array NOT NULL DEFAULT '{}'[]`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "amount_from_liability" numeric(12,2) DEFAULT '0'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "amount_cash" numeric(12,2) DEFAULT '0'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "liability_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "labor_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "UQ_236b4a4823e804dd97f3cf801e7" UNIQUE ("labor_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "site_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "work_date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "quantity_tons" numeric(10,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "rate_per_ton" numeric(10,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "evidence_photos" text array NOT NULL DEFAULT '{}'[]`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "supervisor_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "UQ_dbf9ba601e43dd884585e53d0ce" UNIQUE ("supervisor_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "assigned_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "lease_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "lease_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "mining_site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "cnic" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "UQ_7316fee3f67b04fe07e14908ee3" UNIQUE ("cnic")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "email" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "share_percentage" numeric(5,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "address" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "distribution_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "share_percentage" numeric(5,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "payout_amount" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "period_start" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "period_end" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "total_revenue" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "total_expenses" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "total_profit" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "approved_at" TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "status" "coal_mining"."profit_distributions_status_enum" NOT NULL DEFAULT '() => "'pending'.profit_distributions_status_enum"'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "approved_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "name" character varying(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD CONSTRAINT "UQ_4a77d431a6b2ac981c342b13c94" UNIQUE ("name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "permissions" jsonb DEFAULT '[]'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "is_active" boolean DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "status" character varying(50) DEFAULT 'active'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "updated_at" TIMESTAMP DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "updated_comment" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "assigned_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ADD "phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "client_type_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "business_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "owner_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "owner_contact" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "munshi_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "munshi_contact" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "onboarding_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "document_files" text array NOT NULL DEFAULT '{}'[]`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "coal_agent_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "expense_type_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "worker_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "expense_date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "proof" text array NOT NULL DEFAULT '{}'[]`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "labor_cost_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "payment_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "partner_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "cnic" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "start_date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "end_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "father_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "address" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "mobile_number" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "emergency_number" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "supervisor_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "daily_wage" numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "onboarding_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "offboarding_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "other_detail" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "status" "coal_mining"."workers_status_enum" NOT NULL DEFAULT '() => "'active'.labor_status_enum"'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ALTER COLUMN "assigned_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ALTER COLUMN "assigned_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ALTER COLUMN "full_name" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP CONSTRAINT "expense_categories_name_key"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD CONSTRAINT "UQ_6bdb3db95dd955d3c701e935426" UNIQUE ("name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP CONSTRAINT "FK_16c9665fe75123f53cea16dee3b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ALTER COLUMN "site_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_80969a8a02569e19a4b00f90837"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ALTER COLUMN "amount" TYPE numeric(15,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ALTER COLUMN "site_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ALTER COLUMN "total_cost" TYPE numeric(15,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP CONSTRAINT "FK_f06ca6d15de612fc339464c3114"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ALTER COLUMN "site_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "FK_f9c911595b51f9e23ee95341c89"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ALTER COLUMN "site_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP CONSTRAINT "UQ_6bdb3db95dd955d3c701e935426"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "name" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD CONSTRAINT "UQ_6bdb3db95dd955d3c701e935426" UNIQUE ("name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "FK_83ce44667eb960cc678b744c1d7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "UQ_83ce44667eb960cc678b744c1d7" UNIQUE ("labor_cost_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "UQ_f9c911595b51f9e23ee95341c89" UNIQUE ("site_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`CREATE SEQUENCE IF NOT EXISTS "coal_mining"."payables_id_seq" OWNED BY "coal_mining"."payables"."id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "id" SET DEFAULT nextval('"coal_mining"."payables_id_seq"')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "id" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "type" SET DEFAULT 'Advance Payment'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "remaining_balance" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "proof" SET DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "status" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ALTER COLUMN "status" SET DEFAULT 'Pending'`);
        await queryRunner.query(`COMMENT ON COLUMN "coal_mining"."payments"."payment_type" IS 'Payable Deduction or Receivable Payment'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ALTER COLUMN "payment_method" DROP NOT NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "coal_mining"."payments"."payment_method" IS 'Cash, Bank Transfer, etc.'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ALTER COLUMN "payment_method" DROP DEFAULT`);
        await queryRunner.query(`COMMENT ON COLUMN "coal_mining"."payments"."proof" IS 'File paths for receipts/proofs'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" DROP COLUMN "received_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ADD "received_by" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "UQ_5fef794ace9cf73ff45b03068de" UNIQUE ("user_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "UQ_b732bb50d70060e60351cdc5e0b" UNIQUE ("role_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ALTER COLUMN "assigned_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`CREATE UNIQUE INDEX "expense_categories_name_key" ON "coal_mining"."expense_categories" ("name") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "expense_categories_pkey" ON "coal_mining"."expense_categories" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "expense_types_name_key" ON "coal_mining"."expense_types" ("name") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "expense_types_pkey" ON "coal_mining"."expense_types" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "client_types_name_key" ON "coal_mining"."client_types" ("name") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "client_types_pkey" ON "coal_mining"."client_types" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_income_client" ON "coal_mining"."income" ("client_id") `);
        await queryRunner.query(`CREATE INDEX "idx_income_site" ON "coal_mining"."income" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_income_date" ON "coal_mining"."income" ("loading_date") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cost_workers_site_id" ON "coal_mining"."labor_cost_workers" ("site_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "UQ_5aba3b98daab87c536e9c7d58dc" ON "coal_mining"."labor_cost_workers" ("labor_cost_id", "labor_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "labor_cost_workers_pkey" ON "coal_mining"."labor_cost_workers" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cost_date" ON "coal_mining"."labor_costs" ("work_date") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cost_site" ON "coal_mining"."labor_costs" ("site_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "labor_costs_pkey" ON "coal_mining"."labor_costs" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "UQ_fa5b6365e8d996ec487500cf818" ON "coal_mining"."site_supervisors" ("site_id", "supervisor_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "site_supervisors_pkey" ON "coal_mining"."site_supervisors" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "account_types_name_key" ON "coal_mining"."account_types" ("name") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "account_types_pkey" ON "coal_mining"."account_types" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "general_ledger_pkey" ON "coal_mining"."general_ledger" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "payables_pkey" ON "coal_mining"."payables" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_receivable_date" ON "coal_mining"."receivables" ("date") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "receivables_pkey" ON "coal_mining"."receivables" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_payment_date" ON "coal_mining"."payments" ("payment_date") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "payments_pkey" ON "coal_mining"."payments" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_mining_site_lease" ON "coal_mining"."mining_sites" ("lease_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "mining_sites_pkey" ON "coal_mining"."mining_sites" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "leases_pkey" ON "coal_mining"."leases" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_mining_site" ON "coal_mining"."partners" ("mining_site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_lease" ON "coal_mining"."partners" ("lease_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "partners_pkey" ON "coal_mining"."partners" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "UQ_7316fee3f67b04fe07e14908ee3" ON "coal_mining"."partners" ("cnic") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_cnic" ON "coal_mining"."partners" ("cnic") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_payouts_site_id" ON "coal_mining"."partner_payouts" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_payout_partner" ON "coal_mining"."partner_payouts" ("partner_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "partner_payouts_pkey" ON "coal_mining"."partner_payouts" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_payout_distribution" ON "coal_mining"."partner_payouts" ("distribution_id") `);
        await queryRunner.query(`CREATE INDEX "idx_profit_distributions_site_id" ON "coal_mining"."profit_distributions" ("site_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "profit_distributions_pkey" ON "coal_mining"."profit_distributions" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "user_roles_name_key" ON "coal_mining"."user_roles" ("name") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "user_roles_pkey" ON "coal_mining"."user_roles" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_user_assigned_roles_user_id" ON "coal_mining"."user_assigned_roles" ("user_id") `);
        await queryRunner.query(`CREATE INDEX "idx_user_assigned_roles_status" ON "coal_mining"."user_assigned_roles" ("status") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "user_assigned_roles_user_id_role_id_key" ON "coal_mining"."user_assigned_roles" ("role_id", "user_id") `);
        await queryRunner.query(`CREATE INDEX "idx_user_assigned_roles_role_id" ON "coal_mining"."user_assigned_roles" ("role_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "user_assigned_roles_pkey" ON "coal_mining"."user_assigned_roles" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "users_username_key" ON "coal_mining"."users" ("username") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "users_pkey" ON "coal_mining"."users" ("id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "users_email_key" ON "coal_mining"."users" ("email") `);
        await queryRunner.query(`CREATE INDEX "idx_clients_site_id" ON "coal_mining"."clients" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_client_type" ON "coal_mining"."clients" ("client_type_id") `);
        await queryRunner.query(`CREATE INDEX "idx_client_business_name" ON "coal_mining"."clients" ("business_name") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_type" ON "coal_mining"."expenses" ("expense_type_id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_site" ON "coal_mining"."expenses" ("site_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "expenses_pkey" ON "coal_mining"."expenses" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_date" ON "coal_mining"."expenses" ("expense_date") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_category" ON "coal_mining"."expenses" ("category_id") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_site" ON "coal_mining"."workers" ("site_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "labor_pkey" ON "coal_mining"."workers" ("id") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cnic" ON "coal_mining"."workers" ("cnic") `);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "FK_5fef794ace9cf73ff45b03068de" FOREIGN KEY ("user_id") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "FK_b732bb50d70060e60351cdc5e0b" FOREIGN KEY ("role_id") REFERENCES "coal_mining"."user_roles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD CONSTRAINT "FK_6bdebac632401bdea8cae648e1c" FOREIGN KEY ("partner_id") REFERENCES "coal_mining"."partners"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD CONSTRAINT "FK_16c9665fe75123f53cea16dee3b" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_80969a8a02569e19a4b00f90837" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_5761adee29a8e328e2aa57ce302" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "FK_83ce44667eb960cc678b744c1d7" FOREIGN KEY ("labor_cost_id") REFERENCES "coal_mining"."labor_costs"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "FK_65ca8995d7ef223331623b0228b" FOREIGN KEY ("worker_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD CONSTRAINT "FK_f06ca6d15de612fc339464c3114" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "FK_f9c911595b51f9e23ee95341c89" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD CONSTRAINT "FK_1ff4ef9c8c3704f4ab8c4194e4f" FOREIGN KEY ("partner_id") REFERENCES "coal_mining"."partners"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."truck_deliveries" ADD CONSTRAINT "FK_dec929e362ef0c7edf3d0e34792" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."truck_deliveries" ADD CONSTRAINT "FK_d3b03f5fd52a5e9e84057f38f7c" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."production" ADD CONSTRAINT "FK_98d244de11086b5d2f296efb21f" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ADD CONSTRAINT "FK_8790d3264c2a836541ca100c78f" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "FK_236b4a4823e804dd97f3cf801e7" FOREIGN KEY ("labor_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "FK_863cd0a652f6f6a45c435074d79" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD CONSTRAINT "FK_dbe85a9e696f4a310a30501b063" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD CONSTRAINT "FK_b81d7b8569bcc8f71e4b3efefa2" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "FK_dbf9ba601e43dd884585e53d0ce" FOREIGN KEY ("supervisor_id") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ADD CONSTRAINT "FK_efafc797f2a25b62b78b73d7fd2" FOREIGN KEY ("account_type_id") REFERENCES "coal_mining"."account_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ADD CONSTRAINT "FK_b147ccad4e7ca145e8f2fc93fff" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ADD CONSTRAINT "FK_110ceecf0c59f3a0ab00ddbbb89" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ADD CONSTRAINT "FK_96f5446bc8b37009a3b2b736e68" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ADD CONSTRAINT "FK_59fed1e96388af8cd39079d27e1" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ADD CONSTRAINT "FK_0397f960da1fe82ae96350d116b" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ADD CONSTRAINT "FK_bce3f30c3460065a6aeca163258" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ADD CONSTRAINT "FK_3fc5d7727ba6cf83031f7975689" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ADD CONSTRAINT "FK_2b505576ec68c4d47782a51a832" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD CONSTRAINT "FK_b873d3f1298472b471bb0385b5d" FOREIGN KEY ("lease_id") REFERENCES "coal_mining"."leases"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "FK_266e3afafad566fde97379e8ae6" FOREIGN KEY ("lease_id") REFERENCES "coal_mining"."leases"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "FK_19583378307b8114cb2a7cadfc9" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD CONSTRAINT "FK_804560ec0e32381a87370cafc56" FOREIGN KEY ("distribution_id") REFERENCES "coal_mining"."profit_distributions"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD CONSTRAINT "FK_ffb454ac856c27f255e59d986c7" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD CONSTRAINT "FK_ef0eed7f5e819f5ac6bfe11dac4" FOREIGN KEY ("approved_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD CONSTRAINT "FK_d82afa9f8d76da9fcda1860e9d2" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "FK_630cf9b03b9d58d5d3457b3d6d3" FOREIGN KEY ("assigned_by") REFERENCES "coal_mining"."users"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "FK_23e74308317dd8bb7ad304cc596" FOREIGN KEY ("client_type_id") REFERENCES "coal_mining"."client_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "FK_299349f27c1d789679a2a3f46c1" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "FK_87a40c9c38aa917baff4aca82de" FOREIGN KEY ("coal_agent_id") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_0154a043ec552062a4251d6a4de" FOREIGN KEY ("expense_type_id") REFERENCES "coal_mining"."expense_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_bac8ebcc661b0b495626a8c3231" FOREIGN KEY ("worker_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_22eb9437b91298ce0161b05ce94" FOREIGN KEY ("partner_id") REFERENCES "coal_mining"."partners"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD CONSTRAINT "FK_e9013910ca0603290cd346e42a3" FOREIGN KEY ("supervisor_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP CONSTRAINT "FK_e9013910ca0603290cd346e42a3"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_22eb9437b91298ce0161b05ce94"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_bac8ebcc661b0b495626a8c3231"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_0154a043ec552062a4251d6a4de"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "FK_87a40c9c38aa917baff4aca82de"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "FK_299349f27c1d789679a2a3f46c1"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP CONSTRAINT "FK_23e74308317dd8bb7ad304cc596"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "FK_630cf9b03b9d58d5d3457b3d6d3"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP CONSTRAINT "FK_d82afa9f8d76da9fcda1860e9d2"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP CONSTRAINT "FK_ef0eed7f5e819f5ac6bfe11dac4"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP CONSTRAINT "FK_ffb454ac856c27f255e59d986c7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP CONSTRAINT "FK_804560ec0e32381a87370cafc56"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "FK_19583378307b8114cb2a7cadfc9"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "FK_266e3afafad566fde97379e8ae6"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP CONSTRAINT "FK_b873d3f1298472b471bb0385b5d"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" DROP CONSTRAINT "FK_2b505576ec68c4d47782a51a832"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" DROP CONSTRAINT "FK_3fc5d7727ba6cf83031f7975689"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" DROP CONSTRAINT "FK_bce3f30c3460065a6aeca163258"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" DROP CONSTRAINT "FK_0397f960da1fe82ae96350d116b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" DROP CONSTRAINT "FK_59fed1e96388af8cd39079d27e1"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" DROP CONSTRAINT "FK_96f5446bc8b37009a3b2b736e68"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" DROP CONSTRAINT "FK_110ceecf0c59f3a0ab00ddbbb89"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" DROP CONSTRAINT "FK_b147ccad4e7ca145e8f2fc93fff"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" DROP CONSTRAINT "FK_efafc797f2a25b62b78b73d7fd2"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "FK_dbf9ba601e43dd884585e53d0ce"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP CONSTRAINT "FK_b81d7b8569bcc8f71e4b3efefa2"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP CONSTRAINT "FK_dbe85a9e696f4a310a30501b063"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "FK_863cd0a652f6f6a45c435074d79"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "FK_236b4a4823e804dd97f3cf801e7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" DROP CONSTRAINT "FK_8790d3264c2a836541ca100c78f"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."production" DROP CONSTRAINT "FK_98d244de11086b5d2f296efb21f"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."truck_deliveries" DROP CONSTRAINT "FK_d3b03f5fd52a5e9e84057f38f7c"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."truck_deliveries" DROP CONSTRAINT "FK_dec929e362ef0c7edf3d0e34792"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP CONSTRAINT "FK_1ff4ef9c8c3704f4ab8c4194e4f"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "FK_f9c911595b51f9e23ee95341c89"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP CONSTRAINT "FK_f06ca6d15de612fc339464c3114"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "FK_65ca8995d7ef223331623b0228b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "FK_83ce44667eb960cc678b744c1d7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_5761adee29a8e328e2aa57ce302"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP CONSTRAINT "FK_80969a8a02569e19a4b00f90837"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP CONSTRAINT "FK_16c9665fe75123f53cea16dee3b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP CONSTRAINT "FK_6bdebac632401bdea8cae648e1c"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "FK_b732bb50d70060e60351cdc5e0b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "FK_5fef794ace9cf73ff45b03068de"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cnic"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."labor_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_category"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."expenses_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_expense_type"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_client_business_name"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_client_type"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_clients_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."users_email_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."users_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."users_username_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."user_assigned_roles_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_user_assigned_roles_role_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."user_assigned_roles_user_id_role_id_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_user_assigned_roles_status"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_user_assigned_roles_user_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."user_roles_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."user_roles_name_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."profit_distributions_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_profit_distributions_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_payout_distribution"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."partner_payouts_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_payout_partner"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_payouts_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_cnic"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."UQ_7316fee3f67b04fe07e14908ee3"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."partners_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_lease"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_partner_mining_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."leases_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."mining_sites_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_mining_site_lease"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."payments_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_payment_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."receivables_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_receivable_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."payables_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."general_ledger_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."account_types_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."account_types_name_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."site_supervisors_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."UQ_fa5b6365e8d996ec487500cf818"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."labor_costs_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cost_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cost_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."labor_cost_workers_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."UQ_5aba3b98daab87c536e9c7d58dc"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_labor_cost_workers_site_id"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_date"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_site"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."idx_income_client"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."client_types_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."client_types_name_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."expense_types_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."expense_types_name_key"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."expense_categories_pkey"`);
        await queryRunner.query(`DROP INDEX "coal_mining"."expense_categories_name_key"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ALTER COLUMN "assigned_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "UQ_b732bb50d70060e60351cdc5e0b"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP CONSTRAINT "UQ_5fef794ace9cf73ff45b03068de"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" DROP COLUMN "received_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ADD "received_by" integer`);
        await queryRunner.query(`COMMENT ON COLUMN "coal_mining"."payments"."proof" IS NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ALTER COLUMN "payment_method" SET DEFAULT 'cash'`);
        await queryRunner.query(`COMMENT ON COLUMN "coal_mining"."payments"."payment_method" IS NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payments" ALTER COLUMN "payment_method" SET NOT NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "coal_mining"."payments"."payment_type" IS NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ALTER COLUMN "status" SET DEFAULT 'Active'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."receivables" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "status" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "proof" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "remaining_balance" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "type" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "id" SET DEFAULT nextval('coal_mining.liabilities_id_seq')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "id" DROP DEFAULT`);
        await queryRunner.query(`DROP SEQUENCE "coal_mining"."payables_id_seq"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "UQ_f9c911595b51f9e23ee95341c89"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "UQ_83ce44667eb960cc678b744c1d7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "FK_83ce44667eb960cc678b744c1d7" FOREIGN KEY ("labor_cost_id") REFERENCES "coal_mining"."labor_costs"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP CONSTRAINT "UQ_6bdb3db95dd955d3c701e935426"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD CONSTRAINT "UQ_6bdb3db95dd955d3c701e935426" UNIQUE ("name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ALTER COLUMN "site_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "FK_f9c911595b51f9e23ee95341c89" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ALTER COLUMN "site_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD CONSTRAINT "FK_f06ca6d15de612fc339464c3114" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ALTER COLUMN "total_cost" TYPE numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ALTER COLUMN "site_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ALTER COLUMN "amount" TYPE numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_80969a8a02569e19a4b00f90837" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ALTER COLUMN "site_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD CONSTRAINT "FK_16c9665fe75123f53cea16dee3b" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP CONSTRAINT "UQ_6bdb3db95dd955d3c701e935426"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "name" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD CONSTRAINT "expense_categories_name_key" UNIQUE ("name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ALTER COLUMN "full_name" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ALTER COLUMN "assigned_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ALTER COLUMN "assigned_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "other_detail"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "offboarding_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "onboarding_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "daily_wage"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "supervisor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "emergency_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "mobile_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "address"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "father_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "end_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "start_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "cnic"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "partner_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "payment_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "labor_cost_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "proof"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "expense_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "worker_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "expense_type_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "coal_agent_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "document_files"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "onboarding_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "munshi_contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "munshi_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "owner_contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "owner_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "business_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "client_type_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "assigned_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "updated_comment"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "permissions"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP CONSTRAINT "UQ_4a77d431a6b2ac981c342b13c94"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "approved_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "approved_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "total_profit"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "total_expenses"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "total_revenue"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "period_end"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "period_start"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "payout_amount"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "share_percentage"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "distribution_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "address"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "share_percentage"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "email"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP CONSTRAINT "UQ_7316fee3f67b04fe07e14908ee3"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "cnic"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "mining_site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "lease_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "lease_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "assigned_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP CONSTRAINT "UQ_dbf9ba601e43dd884585e53d0ce"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "supervisor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "evidence_photos"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "rate_per_ton"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "quantity_tons"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "work_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP CONSTRAINT "UQ_236b4a4823e804dd97f3cf801e7"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "labor_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "site_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "liability_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "amount_cash"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "amount_from_liability"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "evidence_photos"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "total_price"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "quantity_tons"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "vehicle_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "buyer_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "company_commission"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "coal_price"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "driver_phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "driver_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "loading_date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "truck_number"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "modified_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "created_by"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "partner_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "created_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "hourly_rate"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" DROP COLUMN "role"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "created_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "cost"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "hours"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" DROP COLUMN "worker_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" DROP COLUMN "date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" DROP COLUMN "date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "type"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "phone"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "email"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "source"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "amount"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" DROP COLUMN "date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "profit_share"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" DROP COLUMN "contact"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "amount"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" DROP COLUMN "partner_id"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "amount"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" DROP COLUMN "date"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP CONSTRAINT "UQ_85683c502a3882013c989f4ee35"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" DROP COLUMN "role_name"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "lease_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "assigned_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD "supervisor_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "other_detail" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "emergency_number" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "mobile_number" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "address" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "father_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "cnic" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "supervisor_id" integer`);
        await queryRunner.query(`CREATE TYPE "coal_mining"."workers_status_enum" AS ENUM('active', 'inactive')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "status" "coal_mining"."workers_status_enum" NOT NULL DEFAULT 'active'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "offboarding_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "onboarding_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "daily_wage" numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "end_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD "start_date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "labor_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "evidence_photos" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "rate_per_ton" numeric(10,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "quantity_tons" numeric(10,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "work_date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "site_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "proof" text array DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "payment_proof" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "evidence_photos" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "worker_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "expense_type_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "payment_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "partner_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "labor_id" integer`);
        await queryRunner.query(`CREATE TYPE "coal_mining"."expenses_payee_type_enum" AS ENUM('labor', 'partner')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "payee_type" "coal_mining"."expenses_payee_type_enum"`);
        await queryRunner.query(`CREATE TYPE "coal_mining"."expenses_account_type_enum" AS ENUM('employee', 'vendor', 'partner', 'other')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "account_type" "coal_mining"."expenses_account_type_enum"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "labor_cost_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD "expense_date" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "document_files" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "munshi_contact" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "munshi_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "owner_contact" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "owner_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "business_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "client_type_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "onboarding_date" date`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD "coal_agent_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "evidence_photos" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "vehicle_number" character varying(50)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "buyer_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "driver_phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "driver_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "truck_number" character varying(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "amount_cash" numeric(12,2) DEFAULT '0'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "liability_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "amount_from_liability" numeric(12,2) DEFAULT '0'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "created_by" integer`);
        await queryRunner.query(`CREATE TYPE "coal_mining"."income_status_enum" AS ENUM('draft', 'completed')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "status" "coal_mining"."income_status_enum" NOT NULL DEFAULT 'draft'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "total_price" numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "quantity_tons" numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "company_commission" numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "coal_price" numeric(12,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD "loading_date" TIMESTAMP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "email" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "address" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "cnic" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "UQ_7316fee3f67b04fe07e14908ee3" UNIQUE ("cnic")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "lease" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "modified_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "created_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "mining_site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "lease_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "mine_number" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD "share_percentage" numeric(5,2)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "site_id" integer`);
        await queryRunner.query(`CREATE TYPE "coal_mining"."profit_distributions_status_enum" AS ENUM('pending', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "status" "coal_mining"."profit_distributions_status_enum" NOT NULL DEFAULT 'pending'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "approved_at" TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "approved_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "total_profit" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "total_expenses" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "total_revenue" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "period_end" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD "period_start" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "site_id" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "payout_amount" numeric(15,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "share_percentage" numeric(5,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD "distribution_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ADD "phone" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."users" ADD "is_active" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "status" character varying(50) DEFAULT 'active'`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "updated_comment" text`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "updated_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD "assigned_by" integer`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "name" character varying(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD CONSTRAINT "user_roles_name_key" UNIQUE ("name")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "is_active" boolean DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_roles" ADD "permissions" jsonb DEFAULT '[]'`);
        await queryRunner.query(`DROP TABLE "coal_mining"."production"`);
        await queryRunner.query(`DROP TABLE "coal_mining"."truck_deliveries"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" RENAME COLUMN "is_active" TO "updated_at"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_categories" RENAME COLUMN "updated_at" TO "is_active"`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "UQ_fa5b6365e8d996ec487500cf818" UNIQUE ("site_id", "supervisor_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "UQ_5aba3b98daab87c536e9c7d58dc" UNIQUE ("labor_cost_id", "labor_id")`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "user_assigned_roles_user_id_role_id_key" UNIQUE ("user_id", "role_id")`);
        await queryRunner.query(`CREATE INDEX "idx_lease_name" ON "coal_mining"."leases" ("lease_name") `);
        await queryRunner.query(`CREATE INDEX "idx_liability_status" ON "coal_mining"."payables" ("status") `);
        await queryRunner.query(`CREATE INDEX "idx_ledger_account_type" ON "coal_mining"."general_ledger" ("account_type_id") `);
        await queryRunner.query(`CREATE INDEX "idx_mining_site_lease" ON "coal_mining"."mining_sites" ("lease_id") `);
        await queryRunner.query(`CREATE INDEX "idx_workers_supervisor_id" ON "coal_mining"."workers" ("supervisor_id") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_site" ON "coal_mining"."workers" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cnic" ON "coal_mining"."workers" ("cnic") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cost_workers_site_id" ON "coal_mining"."labor_cost_workers" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cost_date" ON "coal_mining"."labor_costs" ("work_date") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_cost_site" ON "coal_mining"."labor_costs" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_category" ON "coal_mining"."expenses" ("category_id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_client" ON "coal_mining"."expenses" ("client_id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_worker" ON "coal_mining"."expenses" ("worker_id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_type" ON "coal_mining"."expenses" ("expense_type_id") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_date" ON "coal_mining"."expenses" ("expense_date") `);
        await queryRunner.query(`CREATE INDEX "idx_expense_site" ON "coal_mining"."expenses" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_client_business_name" ON "coal_mining"."clients" ("business_name") `);
        await queryRunner.query(`CREATE INDEX "idx_client_type" ON "coal_mining"."clients" ("client_type_id") `);
        await queryRunner.query(`CREATE INDEX "idx_clients_site_id" ON "coal_mining"."clients" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_income_site" ON "coal_mining"."income" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_income_date" ON "coal_mining"."income" ("loading_date") `);
        await queryRunner.query(`CREATE INDEX "idx_income_liability" ON "coal_mining"."income" ("liability_id") `);
        await queryRunner.query(`CREATE INDEX "idx_income_client" ON "coal_mining"."income" ("client_id") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_mining_site" ON "coal_mining"."partners" ("mining_site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_lease" ON "coal_mining"."partners" ("lease_id") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_cnic" ON "coal_mining"."partners" ("cnic") `);
        await queryRunner.query(`CREATE INDEX "idx_profit_distributions_site_id" ON "coal_mining"."profit_distributions" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_payout_partner" ON "coal_mining"."partner_payouts" ("partner_id") `);
        await queryRunner.query(`CREATE INDEX "idx_payout_distribution" ON "coal_mining"."partner_payouts" ("distribution_id") `);
        await queryRunner.query(`CREATE INDEX "idx_partner_payouts_site_id" ON "coal_mining"."partner_payouts" ("site_id") `);
        await queryRunner.query(`CREATE INDEX "idx_user_assigned_roles_status" ON "coal_mining"."user_assigned_roles" ("status") `);
        await queryRunner.query(`CREATE INDEX "idx_user_assigned_roles_role_id" ON "coal_mining"."user_assigned_roles" ("role_id") `);
        await queryRunner.query(`CREATE INDEX "idx_user_assigned_roles_user_id" ON "coal_mining"."user_assigned_roles" ("user_id") `);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ADD CONSTRAINT "fk_lease_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."leases" ADD CONSTRAINT "fk_lease_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ADD CONSTRAINT "fk_liability_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ADD CONSTRAINT "fk_liability_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ADD CONSTRAINT "fk_liability_mining_site" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."payables" ADD CONSTRAINT "fk_liability_client" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ADD CONSTRAINT "fk_ledger_account_type" FOREIGN KEY ("account_type_id") REFERENCES "coal_mining"."account_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ADD CONSTRAINT "fk_ledger_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ADD CONSTRAINT "fk_ledger_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."general_ledger" ADD CONSTRAINT "fk_ledger_mining_site" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ADD CONSTRAINT "fk_account_type_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."account_types" ADD CONSTRAINT "fk_account_type_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ADD CONSTRAINT "fk_client_type_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."client_types" ADD CONSTRAINT "fk_client_type_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ADD CONSTRAINT "fk_expense_type_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expense_types" ADD CONSTRAINT "fk_expense_type_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ADD CONSTRAINT "fk_equipment_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ADD CONSTRAINT "fk_equipment_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."equipment" ADD CONSTRAINT "FK_8790d3264c2a836541ca100c78f" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD CONSTRAINT "fk_mining_site_lease" FOREIGN KEY ("lease_id") REFERENCES "coal_mining"."leases"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD CONSTRAINT "fk_mining_site_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."mining_sites" ADD CONSTRAINT "fk_mining_site_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."site_supervisors" ADD CONSTRAINT "FK_dbf9ba601e43dd884585e53d0ce" FOREIGN KEY ("supervisor_id") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD CONSTRAINT "fk_workers_supervisor" FOREIGN KEY ("supervisor_id") REFERENCES "coal_mining"."workers"("id") ON DELETE SET NULL ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD CONSTRAINT "fk_worker_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."workers" ADD CONSTRAINT "fk_worker_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "FK_236b4a4823e804dd97f3cf801e7" FOREIGN KEY ("labor_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_cost_workers" ADD CONSTRAINT "fk_labor_cost_workers_site" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD CONSTRAINT "FK_dbe85a9e696f4a310a30501b063" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."labor_costs" ADD CONSTRAINT "FK_b81d7b8569bcc8f71e4b3efefa2" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_22eb9437b91298ce0161b05ce94" FOREIGN KEY ("partner_id") REFERENCES "coal_mining"."partners"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "fk_expense_type" FOREIGN KEY ("expense_type_id") REFERENCES "coal_mining"."expense_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "fk_expense_worker" FOREIGN KEY ("worker_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_51fb74b0eb9a50850da92d0533c" FOREIGN KEY ("labor_id") REFERENCES "coal_mining"."workers"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "fk_expense_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "FK_7c0c012c2f8e6578277c239ee61" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."expenses" ADD CONSTRAINT "fk_expense_client" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "fk_client_type" FOREIGN KEY ("client_type_id") REFERENCES "coal_mining"."client_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "fk_client_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "FK_f48a5f46db8d13a0c8dad0a435d" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "FK_87a40c9c38aa917baff4aca82de" FOREIGN KEY ("coal_agent_id") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."clients" ADD CONSTRAINT "fk_clients_site" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD CONSTRAINT "fk_income_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD CONSTRAINT "FK_95712ab51d460bd91b7dba1b55b" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD CONSTRAINT "fk_income_liability" FOREIGN KEY ("liability_id") REFERENCES "coal_mining"."payables"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."income" ADD CONSTRAINT "fk_income_client" FOREIGN KEY ("client_id") REFERENCES "coal_mining"."clients"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "fk_partner_lease" FOREIGN KEY ("lease_id") REFERENCES "coal_mining"."leases"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "fk_partner_modified_by" FOREIGN KEY ("modified_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "fk_partner_created_by" FOREIGN KEY ("created_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "fk_partner_mining_site" FOREIGN KEY ("mining_site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partners" ADD CONSTRAINT "FK_84668cdcd6abdb2bf27dab815c8" FOREIGN KEY ("mine_number") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD CONSTRAINT "FK_ef0eed7f5e819f5ac6bfe11dac4" FOREIGN KEY ("approved_by") REFERENCES "coal_mining"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."profit_distributions" ADD CONSTRAINT "fk_profit_distributions_site" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD CONSTRAINT "fk_partner_payouts_site" FOREIGN KEY ("site_id") REFERENCES "coal_mining"."mining_sites"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."partner_payouts" ADD CONSTRAINT "FK_804560ec0e32381a87370cafc56" FOREIGN KEY ("distribution_id") REFERENCES "coal_mining"."profit_distributions"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "user_assigned_roles_assigned_by_fkey" FOREIGN KEY ("assigned_by") REFERENCES "coal_mining"."users"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "user_assigned_roles_user_id_fkey" FOREIGN KEY ("user_id") REFERENCES "coal_mining"."users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coal_mining"."user_assigned_roles" ADD CONSTRAINT "user_assigned_roles_role_id_fkey" FOREIGN KEY ("role_id") REFERENCES "coal_mining"."user_roles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
    }

}
